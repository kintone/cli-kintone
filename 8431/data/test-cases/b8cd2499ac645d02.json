{"uid":"b8cd2499ac645d02","name":"API token does not have privilege to view and edit records","fullName":"features/record/import.feature#API token does not have privilege to view and edit records","historyId":"59a8791f9d210326cb1c31d1dc790a15:d41d8cd98f00b204e9800998ecf8427e","time":{"start":1752948523160,"stop":1752948526311,"duration":3151},"description":"","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":true,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"description":"","status":"passed","steps":[{"name":"Given The CSV file \"CliKintoneTest-29.csv\" with content as below:","time":{"start":1752948523161,"stop":1752948523162,"duration":1},"status":"passed","steps":[],"attachments":[{"uid":"da8583e1bc6a7fbc","name":"Data table","source":"da8583e1bc6a7fbc.csv","type":"text/csv","size":21}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"And The app \"app_for_import\" has some records as below:","time":{"start":1752948523162,"stop":1752948524492,"duration":1330},"status":"passed","steps":[],"attachments":[{"uid":"c2763073302bd7ed","name":"Data table","source":"c2763073302bd7ed.csv","type":"text/csv","size":21}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"And Load app ID of the app \"app_for_import\" as env var: \"APP_ID\"","time":{"start":1752948524492,"stop":1752948524492,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"And Load app token of the app \"app_for_import\" with exact permissions \"add\" as env var: \"API_TOKEN_IMPORT\"","time":{"start":1752948524492,"stop":1752948524493,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"When I run the command with args \"record import --base-url $$TEST_KINTONE_BASE_URL --app $APP_ID --api-token $API_TOKEN_IMPORT --file-path CliKintoneTest-29.csv --update-key Record_number\"","time":{"start":1752948524493,"stop":1752948526310,"duration":1817},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Then I should get the exit code is non-zero","time":{"start":1752948526310,"stop":1752948526310,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"And The output error message should match with the pattern: \"\\[403] \\[GAIA_NO01] Using this API token, you cannot run the specified API.\"","time":{"start":1752948526310,"stop":1752948526311,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":7,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"host","value":"pkrvmq0rgcvqdmg"},{"name":"language","value":"javascript"},{"name":"framework","value":"cucumberjs"},{"name":"thread","value":"2422"},{"name":"feature","value":"record import"},{"name":"suite","value":"API token does not have privilege to view and edit records"},{"name":"tag","value":"@isolated"},{"name":"tag","value":"@import"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":1,"broken":0,"skipped":0,"passed":202,"unknown":0,"total":203},"items":[{"uid":"dd598113eda8f2cf","reportUrl":"https://kintone.github.io/cli-kintone/8428//#testresult/dd598113eda8f2cf","status":"failed","statusDetails":"AssertionError [ERR_ASSERTION]: The input did not match the regular expression /\\[403] \\[GAIA_NO01] Using this API token, you cannot run the specified API./. Input:\n\n'[2025-07-18T08:48:12.303Z] INFO: Preparing to import records...\\n' +\n  '[2025-07-18T08:48:12.931Z] INFO: Imported 0 of 1 records successfully\\n' +\n  '[2025-07-18T08:48:12.931Z] ERROR: Failed to upsert all records.\\n' +\n  '[2025-07-18T08:48:12.931Z] ERROR: No records are processed successfully.\\n' +\n  '[2025-07-18T08:48:12.931Z] ERROR: Error: The field specified as \"Key to Bulk Update\" (Record_number) does not exist on the input\\n'\n\n    at OurWorld.<anonymous> (/home/runner/work/cli-kintone/cli-kintone/features/step_definitions/record/common.ts:230:12)","time":{"start":1752828490186,"stop":1752828492942,"duration":2756}},{"uid":"d65163a07b16f067","reportUrl":"https://kintone.github.io/cli-kintone/8417//#testresult/d65163a07b16f067","status":"passed","time":{"start":1752707401324,"stop":1752707404814,"duration":3490}},{"uid":"2c4cb03c33961e79","reportUrl":"https://kintone.github.io/cli-kintone/8402//#testresult/2c4cb03c33961e79","status":"passed","time":{"start":1752706360273,"stop":1752706363368,"duration":3095}},{"uid":"3e2d4766c62076b1","reportUrl":"https://kintone.github.io/cli-kintone/8385//#testresult/3e2d4766c62076b1","status":"passed","time":{"start":1752618773415,"stop":1752618776980,"duration":3565}},{"uid":"d01d6a5d68d5fb93","reportUrl":"https://kintone.github.io/cli-kintone/8376//#testresult/d01d6a5d68d5fb93","status":"passed","time":{"start":1752525261717,"stop":1752525264290,"duration":2573}},{"uid":"fb57ec81f3078e82","reportUrl":"https://kintone.github.io/cli-kintone/8363//#testresult/fb57ec81f3078e82","status":"passed","time":{"start":1752524251005,"stop":1752524254356,"duration":3351}},{"uid":"c2cbc88330b6d47e","reportUrl":"https://kintone.github.io/cli-kintone/8348//#testresult/c2cbc88330b6d47e","status":"passed","time":{"start":1752523357468,"stop":1752523359916,"duration":2448}},{"uid":"6037ea9512a4f0d7","reportUrl":"https://kintone.github.io/cli-kintone/8327//#testresult/6037ea9512a4f0d7","status":"passed","time":{"start":1752324227173,"stop":1752324230728,"duration":3555}},{"uid":"96ca7e6e44278a21","reportUrl":"https://kintone.github.io/cli-kintone/8318//#testresult/96ca7e6e44278a21","status":"passed","time":{"start":1752323287285,"stop":1752323289707,"duration":2422}},{"uid":"6ca389127762de05","reportUrl":"https://kintone.github.io/cli-kintone/8303//#testresult/6ca389127762de05","status":"passed","time":{"start":1752245089447,"stop":1752245092708,"duration":3261}},{"uid":"a7e4c4a10300daaf","reportUrl":"https://kintone.github.io/cli-kintone/8286//#testresult/a7e4c4a10300daaf","status":"passed","time":{"start":1752114106752,"stop":1752114109292,"duration":2540}},{"uid":"c2518b4a4957fa1","reportUrl":"https://kintone.github.io/cli-kintone/8281//#testresult/c2518b4a4957fa1","status":"passed","time":{"start":1752111343527,"stop":1752111346978,"duration":3451}},{"uid":"a5a9898c774a8d58","reportUrl":"https://kintone.github.io/cli-kintone/8278//#testresult/a5a9898c774a8d58","status":"passed","time":{"start":1752109471064,"stop":1752109473676,"duration":2612}},{"uid":"5647dfe5abeecd93","reportUrl":"https://kintone.github.io/cli-kintone/8269//#testresult/5647dfe5abeecd93","status":"passed","time":{"start":1752097590866,"stop":1752097593930,"duration":3064}},{"uid":"9ca4a0efcf46873","reportUrl":"https://kintone.github.io/cli-kintone/8236//#testresult/9ca4a0efcf46873","status":"passed","time":{"start":1751483536311,"stop":1751483538822,"duration":2511}},{"uid":"f4b10dd4fc83d781","reportUrl":"https://kintone.github.io/cli-kintone/8260//#testresult/f4b10dd4fc83d781","status":"passed","time":{"start":1751958221162,"stop":1751958224249,"duration":3087}},{"uid":"5f53a5f9c0b7680e","reportUrl":"https://kintone.github.io/cli-kintone/8259//#testresult/5f53a5f9c0b7680e","status":"passed","time":{"start":1751948975204,"stop":1751948978825,"duration":3621}},{"uid":"bdc527dfd0e3675d","reportUrl":"https://kintone.github.io/cli-kintone/8236//#testresult/bdc527dfd0e3675d","status":"passed","time":{"start":1751483536311,"stop":1751483538822,"duration":2511}},{"uid":"9c9ed637220d98c0","reportUrl":"https://kintone.github.io/cli-kintone/8225//#testresult/9c9ed637220d98c0","status":"passed","time":{"start":1751482521763,"stop":1751482525091,"duration":3328}},{"uid":"dd513810d0af6ede","reportUrl":"https://kintone.github.io/cli-kintone/8210//#testresult/dd513810d0af6ede","status":"passed","time":{"start":1751400672539,"stop":1751400675125,"duration":2586}}]},"tags":["@isolated","@import"]},"source":"b8cd2499ac645d02.json","parameterValues":[]}