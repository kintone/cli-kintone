{"uid":"52df0d463043b92d","name":"API token does not have privilege to view and edit records","fullName":"features/record/import.feature#API token does not have privilege to view and edit records","historyId":"59a8791f9d210326cb1c31d1dc790a15:d41d8cd98f00b204e9800998ecf8427e","time":{"start":1754268304938,"stop":1754268308578,"duration":3640},"description":"","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"description":"","status":"passed","steps":[{"name":"Given The app \"app_for_import\" has some records as below:","time":{"start":1754268304939,"stop":1754268306693,"duration":1754},"status":"passed","steps":[],"attachments":[{"uid":"48d8c35ae3ad48df","name":"Data table","source":"48d8c35ae3ad48df.csv","type":"text/csv","size":21}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"And The CSV file \"CliKintoneTest-29.csv\" with content as below:","time":{"start":1754268306693,"stop":1754268306695,"duration":2},"status":"passed","steps":[],"attachments":[{"uid":"e0b962fea98c1efc","name":"Data table","source":"e0b962fea98c1efc.csv","type":"text/csv","size":36}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"And Load app ID of the app \"app_for_import\" as env var: \"APP_ID\"","time":{"start":1754268306695,"stop":1754268306695,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"And Load app token of the app \"app_for_import\" with exact permissions \"add\" as env var: \"API_TOKEN_IMPORT\"","time":{"start":1754268306695,"stop":1754268306695,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"When I run the command with args \"record import --base-url $$TEST_KINTONE_BASE_URL --app $APP_ID --api-token $API_TOKEN_IMPORT --file-path CliKintoneTest-29.csv --update-key Record_number\"","time":{"start":1754268306695,"stop":1754268308577,"duration":1882},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Then I should get the exit code is non-zero","time":{"start":1754268308577,"stop":1754268308578,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"And The output error message should match with the pattern: \"\\[403] \\[GAIA_NO01] Using this API token, you cannot run the specified API.\"","time":{"start":1754268308578,"stop":1754268308578,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":7,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"host","value":"pkrvmjbmru5nbw0"},{"name":"language","value":"javascript"},{"name":"framework","value":"cucumberjs"},{"name":"thread","value":"2515"},{"name":"feature","value":"record import"},{"name":"suite","value":"API token does not have privilege to view and edit records"},{"name":"tag","value":"@isolated"},{"name":"tag","value":"@import"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":6,"broken":0,"skipped":0,"passed":214,"unknown":0,"total":220},"items":[{"uid":"cfb1e2cb54f4802","reportUrl":"https://kintone.github.io/cli-kintone/8552//#testresult/cfb1e2cb54f4802","status":"passed","time":{"start":1754064153067,"stop":1754064156367,"duration":3300}},{"uid":"9c243b79d0d6f22e","reportUrl":"https://kintone.github.io/cli-kintone/8545//#testresult/9c243b79d0d6f22e","status":"passed","time":{"start":1753857047625,"stop":1753857050286,"duration":2661}},{"uid":"25d0d8d8de6c1dae","reportUrl":"https://kintone.github.io/cli-kintone/8528//#testresult/25d0d8d8de6c1dae","status":"passed","time":{"start":1753821647388,"stop":1753821650486,"duration":3098}},{"uid":"e9bde69bc254deb1","reportUrl":"https://kintone.github.io/cli-kintone/8515//#testresult/e9bde69bc254deb1","status":"passed","time":{"start":1753766501324,"stop":1753766505014,"duration":3690}},{"uid":"c4514d06befde6df","reportUrl":"https://kintone.github.io/cli-kintone/8493//#testresult/c4514d06befde6df","status":"passed","time":{"start":1753666345150,"stop":1753666348164,"duration":3014}},{"uid":"b30767f6421d98d7","reportUrl":"https://kintone.github.io/cli-kintone/8494//#testresult/b30767f6421d98d7","status":"passed","time":{"start":1753666606045,"stop":1753666608537,"duration":2492}},{"uid":"8b33689f089fa15d","reportUrl":"https://kintone.github.io/cli-kintone/8476//#testresult/8b33689f089fa15d","status":"passed","time":{"start":1753477110859,"stop":1753477113545,"duration":2686}},{"uid":"4daf2ac39dc7b4ee","reportUrl":"https://kintone.github.io/cli-kintone/8461//#testresult/4daf2ac39dc7b4ee","status":"passed","time":{"start":1753476132826,"stop":1753476135301,"duration":2475}},{"uid":"ee85396e747b0195","reportUrl":"https://kintone.github.io/cli-kintone/8458//#testresult/ee85396e747b0195","status":"passed","time":{"start":1753407078018,"stop":1753407081104,"duration":3086}},{"uid":"17df27529be91b60","reportUrl":"https://kintone.github.io/cli-kintone/8457//#testresult/17df27529be91b60","status":"passed","time":{"start":1753339986050,"stop":1753339988711,"duration":2661}},{"uid":"84062b47d668568","reportUrl":"https://kintone.github.io/cli-kintone/8455//#testresult/84062b47d668568","status":"passed","time":{"start":1753318442286,"stop":1753318445477,"duration":3191}},{"uid":"1f79fd76330b777e","reportUrl":"https://kintone.github.io/cli-kintone/8454//#testresult/1f79fd76330b777e","status":"failed","statusDetails":"Error: Importing CSV failed. Error: \n[2025-07-24T00:43:40.969Z] INFO: Starting to import records...\n[2025-07-24T00:43:41.395Z] INFO: Imported 0 of 1 records successfully\n[2025-07-24T00:43:41.396Z] ERROR: Failed to add all records.\n[2025-07-24T00:43:41.396Z] ERROR: No records are processed successfully.\n[2025-07-24T00:43:41.396Z] ERROR: An error occurred while processing records.\n[2025-07-24T00:43:41.396Z] ERROR: [400] [GAIA_UN10] Cannot update field whose type is RECORD_ID. (NXns1jCvSMY4TSRvbMkt)\n\n    at OurWorld.<anonymous> (/home/runner/work/cli-kintone/cli-kintone/features/step_definitions/record/common.ts:164:13)","time":{"start":1753317820395,"stop":1753317821405,"duration":1010}},{"uid":"e04e9456a382c52c","reportUrl":"https://kintone.github.io/cli-kintone/8453//#testresult/e04e9456a382c52c","status":"failed","statusDetails":"Error: Importing CSV failed. Error: \n[2025-07-24T00:36:50.481Z] INFO: Starting to import records...\n[2025-07-24T00:36:51.173Z] INFO: Imported 0 of 1 records successfully\n[2025-07-24T00:36:51.174Z] ERROR: Failed to add all records.\n[2025-07-24T00:36:51.174Z] ERROR: No records are processed successfully.\n[2025-07-24T00:36:51.174Z] ERROR: An error occurred while processing records.\n[2025-07-24T00:36:51.174Z] ERROR: [400] [GAIA_UN10] Cannot update field whose type is RECORD_ID. (DU8RwO4gsRGd3csqSnSx)\n\n    at OurWorld.<anonymous> (/home/runner/work/cli-kintone/cli-kintone/features/step_definitions/record/common.ts:164:13)","time":{"start":1753317409678,"stop":1753317411185,"duration":1507}},{"uid":"688600562ac013f0","reportUrl":"https://kintone.github.io/cli-kintone/8452//#testresult/688600562ac013f0","status":"failed","statusDetails":"AssertionError [ERR_ASSERTION]: The input did not match the regular expression /\\[403] \\[GAIA_NO01] Using this API token, you cannot run the specified API./. Input:\n\n'[2025-07-23T09:01:49.765Z] INFO: Preparing to import records...\\n' +\n  '[2025-07-23T09:01:50.171Z] INFO: Imported 0 of 1 records successfully\\n' +\n  '[2025-07-23T09:01:50.171Z] ERROR: Failed to upsert all records.\\n' +\n  '[2025-07-23T09:01:50.171Z] ERROR: No records are processed successfully.\\n' +\n  '[2025-07-23T09:01:50.171Z] ERROR: Error: The field specified as \"Key to Bulk Update\" (Record_number) does not exist on the input\\n'\n\n    at OurWorld.<anonymous> (/home/runner/work/cli-kintone/cli-kintone/features/step_definitions/record/common.ts:230:12)","time":{"start":1753261308040,"stop":1753261310183,"duration":2143}},{"uid":"c53e3b0f66a6fe39","reportUrl":"https://kintone.github.io/cli-kintone/8451//#testresult/c53e3b0f66a6fe39","status":"failed","statusDetails":"AssertionError [ERR_ASSERTION]: The input did not match the regular expression /\\[403] \\[GAIA_NO01] Using this API token, you cannot run the specified API./. Input:\n\n'[2025-07-23T08:53:41.636Z] INFO: Preparing to import records...\\n' +\n  '[2025-07-23T08:53:41.636Z] INFO: Imported 0 of 1 records successfully\\n' +\n  '[2025-07-23T08:53:41.637Z] ERROR: Failed to upsert all records.\\n' +\n  '[2025-07-23T08:53:41.637Z] ERROR: No records are processed successfully.\\n' +\n  '[2025-07-23T08:53:41.637Z] ERROR: Error: update key field should set to unique\\n'\n\n    at OurWorld.<anonymous> (/home/runner/work/cli-kintone/cli-kintone/features/step_definitions/record/common.ts:230:12)","time":{"start":1753260819943,"stop":1753260821648,"duration":1705}},{"uid":"7d97dc6a0d079f69","reportUrl":"https://kintone.github.io/cli-kintone/8448//#testresult/7d97dc6a0d079f69","status":"failed","statusDetails":"AssertionError [ERR_ASSERTION]: The input did not match the regular expression /\\[403] \\[GAIA_NO01] Using this API token, you cannot run the specified API./. Input:\n\n'[2025-07-22T07:27:03.032Z] INFO: Preparing to import records...\\n' +\n  '[2025-07-22T07:27:03.563Z] INFO: Imported 0 of 1 records successfully\\n' +\n  '[2025-07-22T07:27:03.563Z] ERROR: Failed to upsert all records.\\n' +\n  '[2025-07-22T07:27:03.563Z] ERROR: No records are processed successfully.\\n' +\n  '[2025-07-22T07:27:03.563Z] ERROR: Error: The field specified as \"Key to Bulk Update\" (Record_number) does not exist on the input\\n'\n\n    at OurWorld.<anonymous> (/home/runner/work/cli-kintone/cli-kintone/features/step_definitions/record/common.ts:230:12)","time":{"start":1753169220693,"stop":1753169223576,"duration":2883}},{"uid":"b8cd2499ac645d02","reportUrl":"https://kintone.github.io/cli-kintone/8431//#testresult/b8cd2499ac645d02","status":"passed","time":{"start":1752948523160,"stop":1752948526311,"duration":3151}},{"uid":"dd598113eda8f2cf","reportUrl":"https://kintone.github.io/cli-kintone/8428//#testresult/dd598113eda8f2cf","status":"failed","statusDetails":"AssertionError [ERR_ASSERTION]: The input did not match the regular expression /\\[403] \\[GAIA_NO01] Using this API token, you cannot run the specified API./. Input:\n\n'[2025-07-18T08:48:12.303Z] INFO: Preparing to import records...\\n' +\n  '[2025-07-18T08:48:12.931Z] INFO: Imported 0 of 1 records successfully\\n' +\n  '[2025-07-18T08:48:12.931Z] ERROR: Failed to upsert all records.\\n' +\n  '[2025-07-18T08:48:12.931Z] ERROR: No records are processed successfully.\\n' +\n  '[2025-07-18T08:48:12.931Z] ERROR: Error: The field specified as \"Key to Bulk Update\" (Record_number) does not exist on the input\\n'\n\n    at OurWorld.<anonymous> (/home/runner/work/cli-kintone/cli-kintone/features/step_definitions/record/common.ts:230:12)","time":{"start":1752828490186,"stop":1752828492942,"duration":2756}},{"uid":"d65163a07b16f067","reportUrl":"https://kintone.github.io/cli-kintone/8417//#testresult/d65163a07b16f067","status":"passed","time":{"start":1752707401324,"stop":1752707404814,"duration":3490}},{"uid":"2c4cb03c33961e79","reportUrl":"https://kintone.github.io/cli-kintone/8402//#testresult/2c4cb03c33961e79","status":"passed","time":{"start":1752706360273,"stop":1752706363368,"duration":3095}}]},"tags":["@isolated","@import"]},"source":"52df0d463043b92d.json","parameterValues":[]}